<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='GeoExt-legend-URL'>/**
</span> * @class GeoExt.legend.URL
 */
Ext.define('GeoExt.legend.URL', {
    extend : 'GeoExt.legend.Layer',
    alias : 'widget.gx_urllegend',
    alternateClassName : 'GeoExt.URLLegend',
    
    statics : {
        supports: function(layerRecord) {
            return layerRecord.get(&quot;legendURL&quot;) == null ? 0 : 10;
        }
    },

    config: {
<span id='GeoExt-legend-URL-cfg-defaultStyleIsFirst'>        /** @cfg {Boolean}
</span>         * The WMS spec does not say if the first style advertised for a layer in
         * a Capabilities document is the default style that the layer is
         * rendered with. We make this assumption by default. To be strictly WMS
         * compliant, set this to false, but make sure to configure a STYLES
         * param with your WMS layers, otherwise LegendURLs advertised in the
         * GetCapabilities document cannot be used.
         */
        defaultStyleIsFirst: true,

<span id='GeoExt-legend-URL-cfg-useScaleParameter'>        /** @cfg {Boolean}
</span>         * Should we use the optional SCALE parameter in the SLD WMS
         * GetLegendGraphic request? Defaults to true.
         */
        useScaleParameter: true,

<span id='GeoExt-legend-URL-cfg-baseParams'>        /** @cfg {Object}
</span>         * Optional parameters to add to the legend url, this can e.g. be used to
         * support vendor-specific parameters in a SLD WMS GetLegendGraphic
         * request. To override the default MIME type of image/gif use the
         * FORMAT parameter in baseParams.
         *     
         * var legendPanel = new GeoExt.LegendPanel({
         *     map: map,
         *     title: 'Legend Panel',
         *     defaults: {
         *         style: 'padding:5px',
         *         baseParams: {
         *             FORMAT: 'image/png',
         *             LEGEND_OPTIONS: 'forceLabels:on'
         *         }
         *     }
         * });   
         */
        baseParams: null
    },
    
    initComponent: function(){
        var me = this;
        me.callParent(arguments);
        this.add(Ext.create('GeoExt.legend.Image', {
            url: this.layerRecord.get(&quot;legendURL&quot;)
        }));
    },

<span id='GeoExt-legend-URL-method-update'>    /** 
</span>     * Update the legend, adding, removing or updating
     * the per-sublayer box component.
     * @private
     */
    update: function() {
        this.callParent(arguments);
        this.items.get(1).setUrl(this.layerRecord.get(&quot;legendURL&quot;));
    }  
});

GeoExt.legend.Layer.types[&quot;gx_urllegend&quot;] = GeoExt.legend.URL;
</pre>
</body>
</html>
