<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">describe(&quot;Ext.Date&quot;, function() {
    var dateSave,
        dateValue = 0,
        increment = 3,
        OriginalDate = Date,
        PredictableDate = function() {
            return {
                getTime: function() {
                },
                valueOf: function() {
                    dateValue = dateValue + increment;
                    return dateValue;
                }
            };
        };

    function mockDate() {
        Date = PredictableDate;
    };

    afterEach(function() {
        Date = OriginalDate;
        increment += 16;
    });

    it(&quot;should get time elapsed in millisecond between date instantiation&quot;, function() {
        mockDate();
        var dateA = new PredictableDate();
        expect(Ext.Date.getElapsed(dateA)).toEqual(3);
    });

    it(&quot;should get time elapsed in millisecond between two dates&quot;, function() {
        mockDate();
        var dateA = new PredictableDate(),
            dateB = new PredictableDate();

        expect(Ext.Date.getElapsed(dateA)).toEqual(19);
    });

    describe(&quot;now&quot;, function() {
       it(&quot;should return the current timestamp&quot;, function() {
          var
              millisBeforeCall = +new Date(),
              millisAtCall = Ext.Date.now(),
              millisAfterCall = +new Date();

          expect(millisAtCall).not.toBeLessThan(millisBeforeCall);
          expect(millisAtCall).not.toBeGreaterThan(millisAfterCall);
       });
    });

    describe(&quot;getShortMonthName&quot;, function() {
       it(&quot;should return 3 letter abbreviation for the corresponding month [0-11]&quot;, function() {
           expect(Ext.Date.getShortMonthName(0)).toBe(&quot;Jan&quot;);
           expect(Ext.Date.getShortMonthName(1)).toBe(&quot;Feb&quot;);
           expect(Ext.Date.getShortMonthName(2)).toBe(&quot;Mar&quot;);
           expect(Ext.Date.getShortMonthName(3)).toBe(&quot;Apr&quot;);
           expect(Ext.Date.getShortMonthName(4)).toBe(&quot;May&quot;);
           expect(Ext.Date.getShortMonthName(5)).toBe(&quot;Jun&quot;);
           expect(Ext.Date.getShortMonthName(6)).toBe(&quot;Jul&quot;);
           expect(Ext.Date.getShortMonthName(7)).toBe(&quot;Aug&quot;);
           expect(Ext.Date.getShortMonthName(8)).toBe(&quot;Sep&quot;);
           expect(Ext.Date.getShortMonthName(9)).toBe(&quot;Oct&quot;);
           expect(Ext.Date.getShortMonthName(10)).toBe(&quot;Nov&quot;);
           expect(Ext.Date.getShortMonthName(11)).toBe(&quot;Dec&quot;);
       });
    });

    describe(&quot;getShortDayName&quot;, function() {
       it(&quot;should return 3 letter abbreviation for the corresponding weekday [0-6]&quot;, function() {
          expect(Ext.Date.getShortDayName(0)).toBe(&quot;Sun&quot;);
          expect(Ext.Date.getShortDayName(1)).toBe(&quot;Mon&quot;);
          expect(Ext.Date.getShortDayName(2)).toBe(&quot;Tue&quot;);
          expect(Ext.Date.getShortDayName(3)).toBe(&quot;Wed&quot;);
          expect(Ext.Date.getShortDayName(4)).toBe(&quot;Thu&quot;);
          expect(Ext.Date.getShortDayName(5)).toBe(&quot;Fri&quot;);
          expect(Ext.Date.getShortDayName(6)).toBe(&quot;Sat&quot;);

       });
    });

    describe(&quot;getMonthNumber&quot;, function() {
        it(&quot;should return the month number [0-11] for the corresponding short month name&quot;, function() {
           expect(Ext.Date.getMonthNumber(&quot;jan&quot;)).toBe(0);
           expect(Ext.Date.getMonthNumber(&quot;feb&quot;)).toBe(1);
           expect(Ext.Date.getMonthNumber(&quot;mar&quot;)).toBe(2);
           expect(Ext.Date.getMonthNumber(&quot;apr&quot;)).toBe(3);
           expect(Ext.Date.getMonthNumber(&quot;MAY&quot;)).toBe(4);
           expect(Ext.Date.getMonthNumber(&quot;JUN&quot;)).toBe(5);
           expect(Ext.Date.getMonthNumber(&quot;JUL&quot;)).toBe(6);
           expect(Ext.Date.getMonthNumber(&quot;AUG&quot;)).toBe(7);
           expect(Ext.Date.getMonthNumber(&quot;Sep&quot;)).toBe(8);
           expect(Ext.Date.getMonthNumber(&quot;Oct&quot;)).toBe(9);
           expect(Ext.Date.getMonthNumber(&quot;Nov&quot;)).toBe(10);
           expect(Ext.Date.getMonthNumber(&quot;Dec&quot;)).toBe(11);
        });
        it(&quot;should return the month number [0-11] for the corresponding full month name&quot;, function() {
            expect(Ext.Date.getMonthNumber(&quot;january&quot;)).toBe(0);
            expect(Ext.Date.getMonthNumber(&quot;february&quot;)).toBe(1);
            expect(Ext.Date.getMonthNumber(&quot;march&quot;)).toBe(2);
            expect(Ext.Date.getMonthNumber(&quot;april&quot;)).toBe(3);
            expect(Ext.Date.getMonthNumber(&quot;MAY&quot;)).toBe(4);
            expect(Ext.Date.getMonthNumber(&quot;JUNE&quot;)).toBe(5);
            expect(Ext.Date.getMonthNumber(&quot;JULY&quot;)).toBe(6);
            expect(Ext.Date.getMonthNumber(&quot;AUGUST&quot;)).toBe(7);
            expect(Ext.Date.getMonthNumber(&quot;September&quot;)).toBe(8);
            expect(Ext.Date.getMonthNumber(&quot;October&quot;)).toBe(9);
            expect(Ext.Date.getMonthNumber(&quot;November&quot;)).toBe(10);
            expect(Ext.Date.getMonthNumber(&quot;December&quot;)).toBe(11);
        });
    });

    describe(&quot;formatContainsHourInfo&quot;, function() {
       it(&quot;should return true when format contains hour info&quot;, function() {
          expect(Ext.Date.formatContainsHourInfo(&quot;d/m/Y H:i:s&quot;)).toBeTruthy();
       });
       it(&quot;should return false when format doesn't contains hour info&quot;, function() {
          expect(Ext.Date.formatContainsHourInfo(&quot;d/m/Y&quot;)).toBeFalsy();
       });
    });

    describe(&quot;formatContainsDateInfo&quot;, function() {
        it(&quot;should return true when format contains date info&quot;, function() {
            expect(Ext.Date.formatContainsDateInfo(&quot;d/m/Y H:i:s&quot;)).toBeTruthy();
        });
        it(&quot;should return false when format doesn't contains date info&quot;, function() {
            expect(Ext.Date.formatContainsDateInfo(&quot;H:i:s&quot;)).toBeFalsy();
        });
    });

    describe(&quot;isValid&quot;, function() {
        it(&quot;should return true for valid dates&quot;, function() {
           expect(Ext.Date.isValid(1981, 10, 15, 16, 30, 1, 2)).toBeTruthy();
        });
        it(&quot;should return false for invalid dates&quot;, function() {
            expect(Ext.Date.isValid(999999, 10, 15, 16, 30, 1, 2)).toBeFalsy();
            expect(Ext.Date.isValid(1981, 13, 15, 16, 30, 1, 2)).toBeFalsy();
            expect(Ext.Date.isValid(1981, 10, 32, 16, 30, 1, 2)).toBeFalsy();
            expect(Ext.Date.isValid(1981, 10, 15, 25, 30, 1, 2)).toBeFalsy();
            expect(Ext.Date.isValid(1981, 10, 15, 16, 60, 1, 2)).toBeFalsy();
            expect(Ext.Date.isValid(1981, 10, 15, 16, 30, 60, 2)).toBeFalsy();
            expect(Ext.Date.isValid(1981, 10, 15, 16, 30, 1, 100000)).toBeFalsy();
        });
    });

    describe(&quot;parse&quot;, function() {
        it(&quot;should parse year-only&quot;, function() {
            var date = Ext.Date.parse(&quot;2011&quot;, &quot;Y&quot;),
                expectedDate = new Date();
            expectedDate.setFullYear(2011);
            expectedDate.setHours(0);
            expectedDate.setMinutes(0);
            expectedDate.setSeconds(0);
            expectedDate.setMilliseconds(0);
            expect(date).toEqual(expectedDate);
        });
        
        it(&quot;should parse year-month-date&quot;, function() {
            var date = Ext.Date.parse(&quot;2011-01-20&quot;, &quot;Y-m-d&quot;),
                expectedDate = new Date();
            expectedDate.setFullYear(2011);
            expectedDate.setMonth(0);
            expectedDate.setDate(20);
            expectedDate.setHours(0);
            expectedDate.setMinutes(0);
            expectedDate.setSeconds(0);
            expectedDate.setMilliseconds(0);
            expect(date).toEqual(expectedDate);
        });
        
        it(&quot;should parse year-month-date hour:minute:second am/pm&quot;, function() {
            var date = Ext.Date.parse(&quot;2011-01-20 6:28:33 PM&quot;, &quot;Y-m-d g:i:s A&quot;),
                expectedDate = new Date();
            expectedDate.setFullYear(2011);
            expectedDate.setMonth(0);
            expectedDate.setDate(20);
            expectedDate.setHours(18);
            expectedDate.setMinutes(28);
            expectedDate.setSeconds(33);
            expectedDate.setMilliseconds(0);
            expect(date).toEqual(expectedDate);
        });
        
        it(&quot;should return null when parsing an invalid date like Feb 31st in stric mode&quot;, function() {
           expect(Ext.Date.parse(&quot;2011-02-31&quot;, &quot;Y-m-d&quot;, true)).toBeNull();
        });
        
        
        it(&quot;should read am/pm&quot;, function() {
            var date = Ext.Date.parse('2010/01/01 12:45 am', 'Y/m/d G:i a'),
                expectedDate = new Date();

            expectedDate.setFullYear(2010);
            expectedDate.setMonth(0);
            expectedDate.setDate(1);
            expectedDate.setHours(0);
            expectedDate.setMinutes(45);
            expectedDate.setSeconds(0);
            expectedDate.setMilliseconds(0); 
            expect(date).toEqual(expectedDate);
        });
           
        it(&quot;should allow am/pm before minutes&quot;, function() {
            var date = Ext.Date.parse('2010/01/01 am 12:45', 'Y/m/d a G:i'),
                expectedDate = new Date();

            expectedDate.setFullYear(2010);
            expectedDate.setMonth(0);
            expectedDate.setDate(1);
            expectedDate.setHours(0);
            expectedDate.setMinutes(45);
            expectedDate.setSeconds(0);
            expectedDate.setMilliseconds(0); 
            expect(date).toEqual(expectedDate);
        });
           
        it(&quot;should correctly parse ISO format&quot;, function() {
            var date = Ext.Date.parse('2012-01-13T01:00:00', 'c'),
                expectedDate = new Date();

            expectedDate.setFullYear(2012);
            expectedDate.setMonth(0);
            expectedDate.setDate(13);
            expectedDate.setHours(1);
            expectedDate.setMinutes(0);
            expectedDate.setSeconds(0);
            expectedDate.setMilliseconds(0); 
            expect(date).toEqual(expectedDate);

            date = Ext.Date.parse('2012-01-13T13:00:00', 'c');
            expectedDate.setFullYear(2012);
            expectedDate.setMonth(0);
            expectedDate.setDate(13);
            expectedDate.setHours(13);
            expectedDate.setMinutes(0);
            expectedDate.setSeconds(0);
            expectedDate.setMilliseconds(0); 
            expect(date).toEqual(expectedDate);
        });
           
        describe(&quot;using separators&quot;, function(){
            it(&quot;should work with hyphen separators&quot;, function() {
                var date = Ext.Date.parse('2010-03-04', 'Y-m-d'),
                    expectedDate = new Date();

                expectedDate.setFullYear(2010);
                expectedDate.setMonth(2);
                expectedDate.setDate(4);
                expectedDate.setHours(0);
                expectedDate.setMinutes(0);
                expectedDate.setSeconds(0);
                expectedDate.setMilliseconds(0); 
                expect(date).toEqual(expectedDate);
                 
           });
           
           it(&quot;should work with slash separators&quot;, function() {
                var date = Ext.Date.parse('2010/03/04', 'Y/m/d'),
                    expectedDate = new Date();

                expectedDate.setFullYear(2010);
                expectedDate.setMonth(2);
                expectedDate.setDate(4);
                expectedDate.setHours(0);
                expectedDate.setMinutes(0);
                expectedDate.setSeconds(0);
                expectedDate.setMilliseconds(0); 
                expect(date).toEqual(expectedDate);
                 
           });
           
           it(&quot;should work with space separators&quot;, function() {
                var date = Ext.Date.parse('2010 03 04', 'Y m d'),
                    expectedDate = new Date();

                expectedDate.setFullYear(2010);
                expectedDate.setMonth(2);
                expectedDate.setDate(4);
                expectedDate.setHours(0);
                expectedDate.setMinutes(0);
                expectedDate.setSeconds(0);
                expectedDate.setMilliseconds(0); 
                expect(date).toEqual(expectedDate);  
           });
       });
       
           
    });

    describe(&quot;isEqual&quot;, function() {
        it(&quot;should return true if both dates are exactly the same&quot;, function() {
            var date1 = new Date(2011, 0, 20, 18, 37, 15, 0),
                date2 = new Date(2011, 0, 20, 18, 37, 15, 0);
            expect(Ext.Date.isEqual(date1, date2)).toBeTruthy();
        });
        it(&quot;should return true if there is at least 1 millisecond difference between both dates&quot;, function() {
            var date1 = new Date(2011, 0, 20, 18, 37, 15, 0),
                date2 = new Date(2011, 0, 20, 18, 37, 15, 1);
            expect(Ext.Date.isEqual(date1, date2)).toBeFalsy();
        });
        it(&quot;should return false if one one of the dates is null/undefined&quot;, function() {
           expect(Ext.Date.isEqual(new Date(), undefined)).toBeFalsy();
           expect(Ext.Date.isEqual(new Date(), null)).toBeFalsy();
           expect(Ext.Date.isEqual(undefined, new Date())).toBeFalsy();
           expect(Ext.Date.isEqual(null, new Date())).toBeFalsy();
        });
        it(&quot;should return true if both dates are null/undefined&quot;, function() {
           expect(Ext.Date.isEqual(null, null)).toBeTruthy();
           expect(Ext.Date.isEqual(null, undefined)).toBeTruthy();
           expect(Ext.Date.isEqual(undefined, null)).toBeTruthy();
           expect(Ext.Date.isEqual(undefined, undefined)).toBeTruthy();
        });
    });

    describe(&quot;getDayOfYear&quot;, function() {
       it(&quot;should return the day of year between 0 and 364 for non-leap years&quot;, function() {
           expect(Ext.Date.getDayOfYear(new Date(2001, 0, 1))).toBe(0);
           expect(Ext.Date.getDayOfYear(new Date(2001, 11, 31))).toBe(364);
       });
       it(&quot;should return the day of year between 0 and 365 for leap years&quot;, function() {
           expect(Ext.Date.getDayOfYear(new Date(2000, 0, 1))).toBe(0);
           expect(Ext.Date.getDayOfYear(new Date(2000, 11, 31))).toBe(365);
       });
    });

    describe(&quot;getFirstDayOfMonth&quot;, function() {
       it(&quot;should return the number [0-6] of the first day of month of the given date&quot;, function() {
           expect(Ext.Date.getFirstDayOfMonth(new Date(2007, 0, 1))).toBe(1);
           expect(Ext.Date.getFirstDayOfMonth(new Date(2000, 0, 2))).toBe(6);
           expect(Ext.Date.getFirstDayOfMonth(new Date(2011, 0, 3))).toBe(6);
           expect(Ext.Date.getFirstDayOfMonth(new Date(2011, 6, 4))).toBe(5);
           expect(Ext.Date.getFirstDayOfMonth(new Date(2011, 11, 5))).toBe(4);
       });
    });

    describe(&quot;getLastDayOfMonth&quot;, function() {
        it(&quot;should return the number [0-6] of the last day of month of the given date&quot;, function() {
            expect(Ext.Date.getLastDayOfMonth(new Date(2007, 0, 1))).toBe(3);
            expect(Ext.Date.getLastDayOfMonth(new Date(2000, 0, 2))).toBe(1);
            expect(Ext.Date.getLastDayOfMonth(new Date(2011, 0, 3))).toBe(1);
            expect(Ext.Date.getLastDayOfMonth(new Date(2011, 6, 4))).toBe(0);
            expect(Ext.Date.getLastDayOfMonth(new Date(2011, 11, 5))).toBe(6);
        });
    });

    describe(&quot;getFirstDateOfMonth&quot;, function() {
        it(&quot;should return the date corresponding to the first day of month of the given date&quot;, function() {
            expect(Ext.Date.getFirstDateOfMonth(new Date(2007, 0, 1))).toEqual(new Date(2007, 0, 1));
            expect(Ext.Date.getFirstDateOfMonth(new Date(2000, 0, 2))).toEqual(new Date(2000, 0, 1));
            expect(Ext.Date.getFirstDateOfMonth(new Date(2011, 0, 3))).toEqual(new Date(2011, 0, 1));
            expect(Ext.Date.getFirstDateOfMonth(new Date(2011, 6, 4))).toEqual(new Date(2011, 6, 1));
            expect(Ext.Date.getFirstDateOfMonth(new Date(2011, 11, 5))).toEqual(new Date(2011, 11, 1));
        });
    });

    describe(&quot;getLastDateOfMonth&quot;, function() {
        it(&quot;should return the date corresponding to the last day of month of the given date&quot;, function() {
            expect(Ext.Date.getLastDateOfMonth(new Date(2007, 1, 1))).toEqual(new Date(2007, 1, 28));
            expect(Ext.Date.getLastDateOfMonth(new Date(2000, 1, 2))).toEqual(new Date(2000, 1, 29));
            expect(Ext.Date.getLastDateOfMonth(new Date(2011, 0, 3))).toEqual(new Date(2011, 0, 31));
            expect(Ext.Date.getLastDateOfMonth(new Date(2011, 5, 4))).toEqual(new Date(2011, 5, 30));
            expect(Ext.Date.getLastDateOfMonth(new Date(2011, 11, 5))).toEqual(new Date(2011, 11, 31));
        });
    });

    describe(&quot;getSuffix&quot;, function() {
       it(&quot;should return st for 1, 21 and 31&quot;, function() {
          expect(Ext.Date.getSuffix(new Date(2011, 0, 1))).toBe(&quot;st&quot;);
          expect(Ext.Date.getSuffix(new Date(2011, 0, 21))).toBe(&quot;st&quot;);
          expect(Ext.Date.getSuffix(new Date(2011, 0, 31))).toBe(&quot;st&quot;);
       });
       it(&quot;should return nd for 2 and, 22&quot;, function() {
           expect(Ext.Date.getSuffix(new Date(2011, 0, 2))).toBe(&quot;nd&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 22))).toBe(&quot;nd&quot;);
       });
       it(&quot;should return rd for 3 and, 23&quot;, function() {
           expect(Ext.Date.getSuffix(new Date(2011, 0, 3))).toBe(&quot;rd&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 23))).toBe(&quot;rd&quot;);
       });
       it(&quot;should return th for days [11-13] and days ending in [4-0]&quot;, function() {
           expect(Ext.Date.getSuffix(new Date(2011, 0, 4))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 5))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 6))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 7))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 8))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 9))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 10))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 11))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 12))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 13))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 14))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 15))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 16))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 17))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 18))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 19))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 20))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 24))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 25))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 26))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 27))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 28))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 29))).toBe(&quot;th&quot;);
           expect(Ext.Date.getSuffix(new Date(2011, 0, 30))).toBe(&quot;th&quot;);
       });
    });

    describe(&quot;clone&quot;, function() {
       it(&quot;should return a copy of the given date&quot;, function() {
          var originalDate = new Date(),
              clonedDate;
          clonedDate = Ext.Date.clone(originalDate);
          expect(clonedDate).not.toBe(originalDate);
          expect(clonedDate).toEqual(originalDate);
       });
    });

    describe(&quot;isDST&quot;, function() {
        // DST detection relies on the locale of the browser running the test as different countries having different
        // versions of DST. Most countries don't observe it at all. Europe has standardized dates for switching times
        // but it differs from the dates used in the USA and Canada.
        //
        // These tests are quite loose but should pass in Europe and North America. Other countries may vary.
        //
        // Early March - USA &amp; Canada enter DST
        // Late March - EU enters DST
        // Late October - EU leaves DST
        // Early November - USA &amp; Canada leave DST

        // This test is disabled because it fails on the Eye but it should pass on most developer machines
        xit(&quot;should return true from the end of March till the middle of October&quot;, function() {
            expect(Ext.Date.isDST(new Date(2010, 2, 31))).toBeTruthy();
            expect(Ext.Date.isDST(new Date(2010, 3, 15))).toBeTruthy();
            expect(Ext.Date.isDST(new Date(2010, 4, 15))).toBeTruthy();
            expect(Ext.Date.isDST(new Date(2010, 5, 15))).toBeTruthy();
            expect(Ext.Date.isDST(new Date(2010, 6, 15))).toBeTruthy();
            expect(Ext.Date.isDST(new Date(2010, 7, 15))).toBeTruthy();
            expect(Ext.Date.isDST(new Date(2010, 8, 15))).toBeTruthy();
            expect(Ext.Date.isDST(new Date(2010, 9, 15))).toBeTruthy();
        });

        it(&quot;should return false from the middle of November till the start of March&quot;, function() {
            expect(Ext.Date.isDST(new Date(2010, 10, 15))).toBeFalsy();
            expect(Ext.Date.isDST(new Date(2010, 11, 15))).toBeFalsy();
            expect(Ext.Date.isDST(new Date(2010, 0, 15))).toBeFalsy();
            expect(Ext.Date.isDST(new Date(2010, 1, 15))).toBeFalsy();
            expect(Ext.Date.isDST(new Date(2010, 2, 1))).toBeFalsy();
       });
    });

    describe(&quot;clearTime&quot;, function() {
       it(&quot;should reset hrs/mins/secs/millis to 0&quot;, function() {
           var date = new Date(2012, 11, 21, 21, 21, 21, 21);
           Ext.Date.clearTime(date);
           expect(date.getHours()).toBe(0);
           expect(date.getMinutes()).toBe(0);
           expect(date.getSeconds()).toBe(0);
           expect(date.getMilliseconds()).toBe(0);
       });
       it(&quot;should return a clone with hrs/mins/secs/millis reseted to 0 when clone option is selected&quot;, function() {
           var date = new Date(2012, 11, 21, 21, 21, 21, 21),
               clearedTimeDate;
           clearedTimeDate = Ext.Date.clearTime(date, true);
           expect(date.getHours()).toBe(21);
           expect(date.getMinutes()).toBe(21);
           expect(date.getSeconds()).toBe(21);
           expect(date.getMilliseconds()).toBe(21);
           expect(clearedTimeDate.getHours()).toBe(0);
           expect(clearedTimeDate.getMinutes()).toBe(0);
           expect(clearedTimeDate.getSeconds()).toBe(0);
           expect(clearedTimeDate.getMilliseconds()).toBe(0);
       });
    });

    describe(&quot;add&quot;, function() {
        var date = new Date(2000, 0, 1, 0, 0, 0, 0);
        it(&quot;should add milliseconds&quot;, function() {
            expect(Ext.Date.add(date, Ext.Date.MILLI, 1)).toEqual(new Date(2000, 0, 1, 0, 0, 0, 1));
        });
        it(&quot;should add seconds&quot;, function() {
            expect(Ext.Date.add(date, Ext.Date.SECOND, 1)).toEqual(new Date(2000, 0, 1, 0, 0, 1, 0));
        });
        it(&quot;should add minutes&quot;, function() {
            expect(Ext.Date.add(date, Ext.Date.MINUTE, 1)).toEqual(new Date(2000, 0, 1, 0, 1, 0, 0));
        });
        it(&quot;should add hours&quot;, function() {
            expect(Ext.Date.add(date, Ext.Date.HOUR, 1)).toEqual(new Date(2000, 0, 1, 1, 0, 0, 0));
        });
        it(&quot;should add days&quot;, function() {
            expect(Ext.Date.add(date, Ext.Date.DAY, 1)).toEqual(new Date(2000, 0, 2, 0, 0, 0, 0));
        });
        it(&quot;should add months&quot;, function() {
            expect(Ext.Date.add(date, Ext.Date.MONTH, 1)).toEqual(new Date(2000, 1, 1, 0, 0, 0, 0));
        });
        it(&quot;should add years&quot;, function() {
           expect(Ext.Date.add(date, Ext.Date.YEAR, 1)).toEqual(new Date(2001, 0, 1, 0, 0, 0, 0));
        });
        it(&quot;should consider last day of month when adding months&quot;, function() {
           expect(Ext.Date.add(new Date(2001, 0, 29), Ext.Date.MONTH, 1)).toEqual(new Date(2001, 1, 28));
           expect(Ext.Date.add(new Date(2001, 0, 30), Ext.Date.MONTH, 1)).toEqual(new Date(2001, 1, 28));
           expect(Ext.Date.add(new Date(2001, 0, 31), Ext.Date.MONTH, 1)).toEqual(new Date(2001, 1, 28));
           expect(Ext.Date.add(new Date(2000, 0, 29), Ext.Date.MONTH, 1)).toEqual(new Date(2000, 1, 29));
           expect(Ext.Date.add(new Date(2000, 0, 30), Ext.Date.MONTH, 1)).toEqual(new Date(2000, 1, 29));
           expect(Ext.Date.add(new Date(2000, 0, 31), Ext.Date.MONTH, 1)).toEqual(new Date(2000, 1, 29));
        });
        it(&quot;should consider last day of month when adding years&quot;, function() {
            expect(Ext.Date.add(new Date(2000, 1, 29), Ext.Date.YEAR, 1)).toEqual(new Date(2001, 1, 28));
        });
    });

    describe(&quot;between&quot;, function() {
        var startDate = new Date(2000, 0, 1),
            endDate = new Date(2000, 0, 31);
        it(&quot;should return true if the date is equal to the start date&quot;, function() {
            expect(Ext.Date.between(new Date(2000, 0, 1), startDate, endDate)).toBeTruthy();
        });
        it(&quot;should return true if the date is equal to the end date&quot;, function() {
            expect(Ext.Date.between(new Date(2000, 0, 31), startDate, endDate)).toBeTruthy();
        });
        it(&quot;should return true if date is between start and end dates&quot;, function() {
            expect(Ext.Date.between(new Date(2000, 0, 15), startDate, endDate)).toBeTruthy();
        });
        it(&quot;should return false if date is before start date&quot;, function() {
            expect(Ext.Date.between(new Date(1999, 11, 31, 23, 59, 59), startDate, endDate)).toBeFalsy();
        });
        it(&quot;should return false if date is after end date&quot;, function() {
            expect(Ext.Date.between(new Date(2000, 0, 31, 0, 0, 1), startDate, endDate)).toBeFalsy();
        });
    });
    
    describe(&quot;formatting&quot;, function(){
        var date = new Date(2010, 0, 1, 13, 45, 32, 4),
            format = Ext.Date.format;
        
        it(&quot;should format with the d option&quot;, function(){
            expect(format(date, 'd')).toBe('01');
        });
        
        it(&quot;should format with the D option&quot;, function(){
            expect(format(date, 'D')).toBe('Fri');
        });
        
        it(&quot;should format with the j option&quot;, function(){
            expect(format(date, 'j')).toBe('1');
        });
        
        it(&quot;should format with the l option&quot;, function(){
            expect(format(date, 'l')).toBe('Friday');
        });
        
        it(&quot;should format with the N option&quot;, function(){
            expect(format(date, 'N')).toBe('5');
        });
        
        it(&quot;should format with the S option&quot;, function(){
            expect(format(date, 'S')).toBe('st');
        });
        
        it(&quot;should format with the w option&quot;, function(){
            expect(format(date, 'w')).toBe('5');
        });
        
        it(&quot;should format with the z option&quot;, function(){
            expect(format(date, 'z')).toBe('0');
        });
        
        it(&quot;should format with the W option&quot;, function(){
            expect(format(date, 'W')).toBe('53');
        });
        
        it(&quot;should format with the F option&quot;, function(){
            expect(format(date, 'F')).toBe('January');
        });
        
        it(&quot;should format with the m option&quot;, function(){
            expect(format(date, 'm')).toBe('01');
        });
        
        it(&quot;should format with the M option&quot;, function(){
            expect(format(date, 'M')).toBe('Jan');
        });
        
        it(&quot;should format with the n option&quot;, function(){
            expect(format(date, 'n')).toBe('1');
        });
        
        it(&quot;should format with the t option&quot;, function(){
            expect(format(date, 't')).toBe('31');
        });
        
        it(&quot;should format with the L option&quot;, function(){
            expect(format(date, 'L')).toBe('0');
        });
        
        it(&quot;should format with the o option&quot;, function(){
            expect(format(date, 'o')).toBe('2009');
        });
        
        it(&quot;should format with the Y option&quot;, function(){
            expect(format(date, 'Y')).toBe('2010');
        });
        
        it(&quot;should format with the y option&quot;, function(){
            expect(format(date, 'y')).toBe('10');
        });
        
        it(&quot;should format with the a option&quot;, function(){
            expect(format(date, 'a')).toBe('pm');
        });
        
        it(&quot;should format with the A option&quot;, function(){
            expect(format(date, 'A')).toBe('PM');
        });
        
        it(&quot;should format with the g option&quot;, function(){
            expect(format(date, 'g')).toBe('1');
        });
        
        it(&quot;should format with the G option&quot;, function(){
            expect(format(date, 'G')).toBe('13');
        });
        
        it(&quot;should format with the h option&quot;, function(){
            expect(format(date, 'h')).toBe('01');
        });
        
        it(&quot;should format with the H option&quot;, function(){
            expect(format(date, 'H')).toBe('13');
        });
        
        it(&quot;should format with the i option&quot;, function(){
            expect(format(date, 'i')).toBe('45');
        });
        
        it(&quot;should format with the s option&quot;, function(){
            expect(format(date, 's')).toBe('32');
        });
        
        it(&quot;should format with the u option&quot;, function(){
            expect(format(date, 'u')).toBe('004');
        });
        
        // can't be static, relies on TZ
        it(&quot;should format with the O option&quot;, function(){
            var value = Ext.Date.getGMTOffset(date, false);            
            expect(format(date, 'O')).toBe(value);
        });
        
        // can't be static, relies on TZ
        it(&quot;should format with the P option&quot;, function(){
            var value = Ext.Date.getGMTOffset(date, true);   
            expect(format(date, 'P')).toBe(value);
        });
        
        // can't be static, relies on TZ
        it(&quot;should format with the T option&quot;, function(){
            var value = Ext.Date.getTimezone(date);
            expect(format(date, 'T')).toBe(value);
        });
        
        // can't be static, relies on TZ
        it(&quot;should format with the Z option&quot;, function(){
            var value = (date.getTimezoneOffset() * -60) + '';
            expect(format(date, 'Z')).toBe(value);
        });
        
        // can't be static, relies on TZ
        it(&quot;should format with the c option&quot;, function(){
            var value = '2010-01-01T13:45:32' + Ext.Date.getGMTOffset(date, true);
            expect(format(date, 'c')).toBe(value);
        });
        
        it(&quot;should format with the U option&quot;, function(){
            var value = Math.round((date.getTime() / 1000)) + '';
            expect(format(date, 'U')).toBe(value);
        });
        
        it(&quot;should format with the MS option&quot;, function(){
            var value = '\\/Date(' + date.getTime() + ')\\/'
            expect(format(date, 'MS')).toBe(value);
        });

        it(&quot;should return an empty string&quot;, function(){
            expect(format(undefined, 'd')).toBe('');
            expect(format(null, 'd')).toBe('');
            expect(format({}, 'd')).toBe('');
            expect(format([], 'd')).toBe('');
            expect(format('', 'd')).toBe('');
            expect(format(true, 'd')).toBe('');
            expect(format(1992, 'd')).toBe('');
        });

        it(&quot;should not return an empty string&quot;, function(){
            expect(format(new Date(), 'd')).not.toBe('');
        });
    });
});
</pre>
</body>
</html>
